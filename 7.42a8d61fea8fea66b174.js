(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{juSB:function(t,n,e){"use strict";e.r(n);var l=e("CcnG"),r=function(){return function(){}}(),a=e("pMnS"),o=e("Blfk"),i=e("Ip0R"),s=e("Fzqc"),u=e("Wf4p"),c=e("ZYjt"),p=e("dWZg"),m=e("wFw1"),b=l.ob({encapsulation:2,styles:[".mat-progress-spinner{display:block;position:relative}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{animation:mat-progress-spinner-linear-rotate 2s linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4s;animation-timing-function:cubic-bezier(.35,0,.25,1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{animation:mat-progress-spinner-stroke-rotate-fallback 10s cubic-bezier(.87,.03,.33,1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.60617px;transform:rotate(0)}12.5%{stroke-dashoffset:56.54867px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.60617px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.54867px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.60617px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.54867px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.60617px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.54867px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}"],data:{}});function d(t){return l.Hb(0,[(t()(),l.qb(0,0,null,null,0,":svg:circle",[["cx","50%"],["cy","50%"]],[[1,"r",0],[4,"animation-name",null],[4,"stroke-dashoffset","px"],[4,"stroke-dasharray","px"],[4,"stroke-width","%"]],null,null,null,null))],null,function(t,n){var e=n.component;t(n,0,0,e._circleRadius,"mat-progress-spinner-stroke-rotate-"+e.diameter,e._strokeDashOffset,e._strokeCircumference,e._circleStrokeWidth)})}function f(t){return l.Hb(0,[(t()(),l.qb(0,0,null,null,0,":svg:circle",[["cx","50%"],["cy","50%"]],[[1,"r",0],[4,"stroke-dashoffset","px"],[4,"stroke-dasharray","px"],[4,"stroke-width","%"]],null,null,null,null))],null,function(t,n){var e=n.component;t(n,0,0,e._circleRadius,e._strokeDashOffset,e._strokeCircumference,e._circleStrokeWidth)})}function g(t){return l.Hb(2,[(t()(),l.qb(0,0,null,null,5,":svg:svg",[["focusable","false"],["preserveAspectRatio","xMidYMid meet"]],[[4,"width","px"],[4,"height","px"],[1,"viewBox",0]],null,null,null,null)),l.pb(1,16384,null,0,i.o,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),l.hb(16777216,null,null,1,null,d)),l.pb(3,278528,null,0,i.p,[l.P,l.M,i.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),l.hb(16777216,null,null,1,null,f)),l.pb(5,278528,null,0,i.p,[l.P,l.M,i.o],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(t,n){t(n,1,0,"indeterminate"===n.component.mode),t(n,3,0,!0),t(n,5,0,!1)},function(t,n){var e=n.component;t(n,0,0,e.diameter,e.diameter,e._viewBox)})}var h=e("mrSG"),x=e("4R65"),v=e("FFOo"),k=e("26FU"),y=e("VnD/"),w=e("ad02"),O=e("psW0"),_=(e("o0su"),function(t){function n(n){var e=t.call(this)||this;return e.map=n,e}return Object(h.c)(n,t),n.prototype.next=function(t){this.map.setRoutePaths(t.paths)},n}(v.a)),S=function(){function t(t){this.apiService=t,this.routePolyLines=[],this.vehicleIdSubject=new k.a(void 0)}return Object.defineProperty(t.prototype,"vehicleId",{get:function(){return this.vehicleIdSubject.getValue()},set:function(t){this.vehicleIdSubject.next(t)},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){var t=this;this.map=x.map(this.mapContainer.nativeElement,{zoomControl:!1}).setView([54.3364478,10.1510508],16),x.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:void 0,maxZoom:18,subdomains:["a","b","c"]}).addTo(this.map),this.map.dragging.disable(),this.map.touchZoom.disable(),this.map.doubleClickZoom.disable(),this.map.scrollWheelZoom.disable(),this.vehicleMarker=this.createVehicleMarker(),this.updateObservable=this.vehicleIdSubject.pipe(Object(y.a)(function(t){return null!==t})).subscribe(function(n){t.updateVehicleMarker(n)}),this.vehicleIdSubject.pipe(Object(y.a)(function(t){return null!==t}),Object(w.a)(),Object(O.a)(function(n){return t.apiService.getRouteByTripId(n.tripId)})).subscribe(new _(this))},t.prototype.setRoutePaths=function(t){for(var n=0,e=t;n<e.length;n++){for(var l=e[n],r=[],a=0,o=l.wayPoints;a<o.length;a++){var i=o[a];r.push(new x.LatLng(i.lat/36e5,i.lon/36e5))}var s=x.polyline(r,{color:l.color,opacity:.5,smoothFactor:1,weight:3});s.addTo(this.map),this.routePolyLines.push(s)}},t.prototype.updateVehicleMarker=function(t){this.vehicleMarker.setLatLng({lat:t.latitude/36e5,lng:t.longitude/36e5}),this.vehicleMarker.setRotationAngle(t.heading-90),this.map.panTo({alt:2e3,lat:t.latitude/36e5,lng:t.longitude/36e5},{animate:!0})},t.prototype.createVehicleMarker=function(){var t=x.icon({iconAnchor:[12,12],iconSize:[24,24],iconUrl:"assets/iconmonstr-arrow-24.png",popupAnchor:[12,12],shadowAnchor:[32,32],shadowSize:[24,24]}),n=x.marker([0,0],{icon:t,title:"vehicle.name",zIndexOffset:100});return n.addTo(this.map),n},t.prototype.ngOnDestroy=function(){this.updateObservable.unsubscribe()},t}(),I=e("H+bZ"),P=l.ob({encapsulation:0,styles:[["div.mapcontainer[_ngcontent-%COMP%]{width:100%;height:100%}"]],data:{}});function M(t){return l.Hb(0,[l.Db(402653184,1,{mapContainer:0}),(t()(),l.qb(1,0,[[1,0],["mapcontainer",1]],null,0,"div",[["class","mapcontainer"]],null,null,null,null,null))],null,null)}var D=e("bujt"),j=e("UodH"),z=e("lLAP"),C=e("ZYCi"),R=e("6UMx"),q=e("0/Q6"),A=e("Mr+X"),L=e("SMsm"),F=e("FbN9"),E=e("8mMr"),H=e("dzgT"),N=e("gI3B"),T=e("67Y/"),V=function(){function t(t,n){this.count=t,this.source=n}return t.prototype.call=function(t,n){return n.subscribe(new $(t,this.count,this.source))},t}(),$=function(t){function n(n,e,l){var r=t.call(this,n)||this;return r.count=e,r.source=l,r}return h.c(n,t),n.prototype.error=function(n){if(!this.isStopped){var e=this.source,l=this.count;if(0===l)return t.prototype.error.call(this,n);l>-1&&(this.count=l-1),e.subscribe(this._unsubscribeAndRecycle())}},n}(v.a),X=function(t){return t[t.LOADING=1]="LOADING",t[t.ERROR=2]="ERROR",t[t.LOADED=3]="LOADED",t[t.PAUSED=4]="PAUSED",t}({}),Z=function(){function t(t,n){var e=this;this.route=t,this.apiService=n,this.tripPassages=[],this.updateStatusSubject=new k.a(X.LOADING),this.StatusOps=X,console.log("trip passages loaded"),t.params.subscribe(function(t){e.tripId=t.tripId}),console.log(this.tripPassages)}return Object.defineProperty(t.prototype,"updateStatus",{get:function(){return this.updateStatusSubject.getValue()},enumerable:!0,configurable:!0}),t.prototype.handleError=function(t,n){return void 0===t&&(t="operation"),this.updateStatusSubject.next(X.ERROR),function(n){return console.error(n),console.log(t+" failed: "+n.message),n}},t.prototype.updateData=function(t){console.log(t),this.routeName=t.routeName,this.updateStatusSubject.next(X.LOADED),t.tripId===this.tripId&&(this.tripData=t,this.tripPassages=t.actual),console.log(this.updateStatus)},t.prototype.ngAfterViewInit=function(){var t,n=this,e=this.route.params.pipe(Object(T.a)(function(t){return t.tripId}));this.updateObservable=Object(H.a)(Object(N.a)(0,5e3),e).pipe(Object(T.a)(function(t){return t[1]}),Object(y.a)(function(t){return null!==t}),Object(O.a)(function(t){return n.apiService.getTripPassages(t)}),(t=3,void 0===t&&(t=-1),function(n){return n.lift(new V(t,n))})).subscribe(new v.a(this.updateData.bind(this),this.handleError.bind(this)))},t.prototype.refreshData=function(){},t.prototype.ngOnDestroy=function(){this.updateObservable.unsubscribe()},t}(),B=l.ob({encapsulation:0,styles:[["mat-card-content.llla[_ngcontent-%COMP%]{overflow-y:scroll}h3.route-title[_ngcontent-%COMP%]{padding:24px}[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);background:#f9f9f9;overflow-y:auto}div.error-box[_ngcontent-%COMP%]{background:#f44336;padding:16px}div.error-box[_ngcontent-%COMP%]   span.title[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;display:block;font-size:12px}mat-list[_ngcontent-%COMP%]{padding:20px}.mat-card.scrollable-content[_ngcontent-%COMP%]{overflow:hidden;display:flex;flex-direction:column}.mat-card.scrollable-content[_ngcontent-%COMP%] > .mat-card-title-group[_ngcontent-%COMP%]{display:block}.mat-card.scrollable-content[_ngcontent-%COMP%] > .mat-card-content[_ngcontent-%COMP%]{overflow-y:auto}app-follow-bus-map[_ngcontent-%COMP%]{display:block;height:200px;width:100%}"]],data:{}});function G(t){return l.Hb(0,[(t()(),l.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),l.qb(1,0,null,null,1,"mat-progress-spinner",[["class","mat-progress-spinner"],["diameter","40"],["mode","indeterminate"],["role","progressbar"]],[[2,"_mat-animation-noopable",null],[4,"width","px"],[4,"height","px"],[1,"aria-valuemin",0],[1,"aria-valuemax",0],[1,"aria-valuenow",0],[1,"mode",0]],null,null,g,b)),l.pb(2,49152,null,0,o.b,[l.k,p.a,[2,i.d],[2,m.a],o.a],{diameter:[0,"diameter"],mode:[1,"mode"]},null)],function(t,n){t(n,2,0,"40","indeterminate")},function(t,n){t(n,1,0,l.zb(n,2)._noopAnimations,l.zb(n,2).diameter,l.zb(n,2).diameter,"determinate"===l.zb(n,2).mode?0:null,"determinate"===l.zb(n,2).mode?100:null,l.zb(n,2).value,l.zb(n,2).mode)})}function U(t){return l.Hb(0,[(t()(),l.qb(0,0,null,null,1,"app-follow-bus-map",[["role","none"]],null,null,null,M,P)),l.pb(1,4374528,null,0,S,[I.a],{vehicleId:[0,"vehicleId"]},null)],function(t,n){var e=n.component;t(n,1,0,null==e.tripData?null:e.tripData.location)},null)}function W(t){return l.Hb(0,[(t()(),l.qb(0,0,null,null,7,"div",[["aria-errormessage","Error retrieving data"],["class","error-box"]],null,null,null,null,null)),(t()(),l.qb(1,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(t()(),l.Fb(-1,null,["Error"])),(t()(),l.qb(3,0,null,null,1,"span",[["class","text"]],null,null,null,null,null)),(t()(),l.Fb(-1,null,["Error"])),(t()(),l.qb(5,0,null,null,2,"button",[["mat-button",""],["role","button"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.refreshData()&&l),l},D.b,D.a)),l.pb(6,180224,null,0,j.b,[l.k,p.a,z.e,[2,m.a]],null,null),(t()(),l.Fb(-1,0,["Retry"]))],null,function(t,n){t(n,5,0,l.zb(n,6).disabled||null,"NoopAnimations"===l.zb(n,6)._animationMode)})}function Y(t){return l.Hb(0,[(t()(),l.qb(0,0,null,null,20,"a",[["role","listitem"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,n,e){var r=!0;return"click"===n&&(r=!1!==l.zb(t,1).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&r),r},null,null)),l.pb(1,671744,null,0,C.q,[C.p,C.a,i.h],{routerLink:[0,"routerLink"]},null),l.Ab(2,2),(t()(),l.qb(3,0,null,null,17,"mat-list-item",[["class","mat-list-item"]],[[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],null,null,R.d,R.b)),l.pb(4,1097728,null,3,q.c,[l.k,[2,q.g]],null,null),l.Db(603979776,2,{_lines:1}),l.Db(335544320,3,{_avatar:0}),l.Db(335544320,4,{_icon:0}),(t()(),l.qb(8,0,null,0,3,"mat-icon",[["aria-label","Bus stop icon"],["class","mat-icon mat-list-icon"],["matListIcon",""],["role","img"]],[[2,"mat-icon-inline",null]],null,null,A.b,A.a)),l.pb(9,9158656,null,0,L.b,[l.k,L.d,[8,null],[2,L.a]],null,null),l.pb(10,16384,[[4,4]],0,q.b,[],null,null),(t()(),l.Fb(-1,0,["trip_origin"])),(t()(),l.qb(12,0,null,1,2,"h3",[["aria-label","Stop name"],["class","mat-line"],["matLine",""]],null,null,null,null,null)),l.pb(13,16384,[[2,4]],0,u.k,[],null,null),(t()(),l.Fb(14,null,["",""])),(t()(),l.qb(15,0,null,1,5,"p",[["class","mat-line"],["matLine",""]],null,null,null,null,null)),l.pb(16,16384,[[2,4]],0,u.k,[],null,null),(t()(),l.qb(17,0,null,null,1,"span",[["role","timer"]],null,null,null,null,null)),(t()(),l.Fb(18,null,["",""])),(t()(),l.qb(19,0,null,null,1,"span",[["class","demo-2"],["role","status"]],null,null,null,null,null)),(t()(),l.Fb(20,null,["-- ",""]))],function(t,n){var e=t(n,2,0,"/stop",null==n.context.$implicit?null:null==n.context.$implicit.stop?null:n.context.$implicit.stop.shortName);t(n,1,0,e),t(n,9,0)},function(t,n){t(n,0,0,l.zb(n,1).target,l.zb(n,1).href),t(n,3,0,l.zb(n,4)._avatar||l.zb(n,4)._icon,l.zb(n,4)._avatar||l.zb(n,4)._icon),t(n,8,0,l.zb(n,9).inline),t(n,14,0,null==n.context.$implicit?null:null==n.context.$implicit.stop?null:n.context.$implicit.stop.name),t(n,18,0,null==n.context.$implicit?null:n.context.$implicit.actualTime),t(n,20,0,null==n.context.$implicit?null:n.context.$implicit.status)})}function K(t){return l.Hb(0,[(t()(),l.qb(0,0,null,null,3,"mat-nav-list",[["class","mat-nav-list"],["role","navigation"]],null,null,null,R.f,R.c)),l.pb(1,49152,null,0,q.g,[],null,null),(t()(),l.hb(16777216,null,0,1,null,Y)),l.pb(3,278528,null,0,i.j,[l.P,l.M,l.s],{ngForOf:[0,"ngForOf"]},null)],function(t,n){t(n,3,0,n.component.tripPassages)},null)}function J(t){return l.Hb(0,[(t()(),l.qb(0,0,null,null,4,"mat-toolbar",[["class","mat-toolbar"],["color","primary"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,F.b,F.a)),l.pb(1,4243456,null,1,E.a,[l.k,p.a,i.d],{color:[0,"color"]},null),l.Db(603979776,1,{_toolbarRows:1}),(t()(),l.qb(3,0,null,0,1,"span",[["aria-level","2"],["role","heading"]],null,null,null,null,null)),(t()(),l.Fb(4,null,[""," - ",""])),(t()(),l.hb(16777216,null,null,1,null,G)),l.pb(6,16384,null,0,i.k,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(t()(),l.hb(16777216,null,null,1,null,U)),l.pb(8,16384,null,0,i.k,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(t()(),l.hb(16777216,null,null,1,null,W)),l.pb(10,16384,null,0,i.k,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(t()(),l.hb(16777216,null,null,1,null,K)),l.pb(12,16384,null,0,i.k,[l.P,l.M],{ngIf:[0,"ngIf"]},null)],function(t,n){var e=n.component;t(n,1,0,"primary"),t(n,6,0,e.updateStatus==e.StatusOps.LOADING),t(n,8,0,e.tripId==(null==e.tripData?null:e.tripData.tripId)),t(n,10,0,e.updateStatus==e.StatusOps.ERROR),t(n,12,0,e.tripId==(null==e.tripData?null:e.tripData.tripId))},function(t,n){var e=n.component;t(n,0,0,l.zb(n,1)._toolbarRows.length>0,0===l.zb(n,1)._toolbarRows.length),t(n,4,0,e.routeName,null==e.tripData?null:e.tripData.directionText)})}function Q(t){return l.Hb(0,[(t()(),l.qb(0,0,null,null,1,"app-trip-passages",[],null,null,null,J,B)),l.pb(1,4374528,null,0,Z,[C.a,I.a],null,null)],null,null)}var tt=l.mb("app-trip-passages",Z,Q,{},{},[]),nt=function(){function t(t){this.api=t}return t.prototype.resolve=function(t,n){return this.api.getTripPassages(t.params.tripId)},t}(),et=e("LC5p"),lt={openSidebar:!0},rt=function(){return function(){}}();e.d(n,"TripPassagesModuleNgFactory",function(){return at});var at=l.nb(r,[],function(t){return l.wb([l.xb(512,l.j,l.cb,[[8,[a.a,tt]],[3,l.j],l.x]),l.xb(4608,i.m,i.l,[l.u,[2,i.w]]),l.xb(4608,nt,nt,[I.a]),l.xb(1073742336,i.c,i.c,[]),l.xb(1073742336,s.a,s.a,[]),l.xb(1073742336,u.j,u.j,[[2,u.c],[2,c.g]]),l.xb(1073742336,L.c,L.c,[]),l.xb(1073742336,u.l,u.l,[]),l.xb(1073742336,p.b,p.b,[]),l.xb(1073742336,u.u,u.u,[]),l.xb(1073742336,u.s,u.s,[]),l.xb(1073742336,et.b,et.b,[]),l.xb(1073742336,q.d,q.d,[]),l.xb(1073742336,j.c,j.c,[]),l.xb(1073742336,E.b,E.b,[]),l.xb(1073742336,o.c,o.c,[]),l.xb(1073742336,C.r,C.r,[[2,C.x],[2,C.p]]),l.xb(1073742336,rt,rt,[]),l.xb(1073742336,r,r,[]),l.xb(1024,C.n,function(){return[[{component:Z,data:lt,path:":tripId",resolve:{stopInfo:nt}}]]},[])])})}}]);